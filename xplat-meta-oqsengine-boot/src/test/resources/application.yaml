instance:
  # static | statefulset 前者读取配置文件,后者使用 k8s statefulset 生成的 hostname.
  type: static
  id: 0

grpc:
  server:
    port: 8081
server:
  port: 8086

logging:
  level:
    root: debug
    io:
      lettuce: info

transaction:
  timeoutMs: 3000000

threadPool:
  # 0 or not exist use cpu core + 1
  call:
    worker: 0
    queue: 1000
  cdc:
    # 0 or not exist use cpu core + 1
    worker: 0

maxVisibleNumber: 10000

sync:
  allowMaxLiveTimeMs: 3000
  allowMaxUnSyncCommitIdSize: 100

storage:
  debug:
    showsql: true
  timeoutMs:
    query: 3000
  master:
    name: "oqsbigentity"
    shard:
      table:
        enabled: false
        size: 1
  index:
    search:
      name: "oqsindex"
      maxQueryTimeMs: 0
    write:
      name: "oqsindex"
      shard:
        enabled: true
        size: 3
  devOps:
    cdc:
      errors:
        name: "cdcerrors"
    maxQueryTimeMs: 3000
    task:
      split: 10
      max:
        queue:
          size: 2000
      execution:
        timeout: 300000
      update:
        frequency: 100
      cache:
        expire: 30
        maxsize: 500
      page:
        size: 1000

redis:
  # 单机 redis://[password@]host[:port][/databaseNumber][?[timeout=timeout[d|h|m|s|ms|us|ns]]
  # 单机SSL rediss://[password@]host[:port][/databaseNumber][?[timeout=timeout[d|h|m|s|ms|us|ns]]
  # 哨兵: redis-sentinel://[password@]host[:port][,host2[:port2]][/databaseNumber][?[timeout=timeout[d|h|m|s|ms|us|ns]]#sentinelMasterId
  # 时间单位
  # d 天
  # h 小时
  # m 分钟
  # s 秒钟
  # ms 毫秒
  # us 微秒
  # ns 纳秒
  uri: "redis://${REDIS_HOST}:${REDIS_PORT}"
  maxReqQueue: 10000

management:
  health:
    redis:
      enabled: false
    db:
      enabled: false
  endpoints:
    enabled-by-default: false
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      enabled: true
      show-details: always
    shutdown:
      enabled: true
    info:
      enabled: true
    prometheus:
      enabled: true

cdc:
  connect:
    type: single
    host: "${CANAL_HOST}"
    port: ${CANAL_PORT}
    destination: nly-v1
    username: root
    password: root
    subscribeFilter: .*\.oqsbigentity.*
    batchSize: 1
  execution:
    timeoutMs: 30000
    single:
      consumer: true